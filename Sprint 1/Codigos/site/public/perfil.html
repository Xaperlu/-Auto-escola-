<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="./css/perfil.css">
  <link rel="shortcut icon" href="./asset/favicon-32x32.png" type="image/x-icon">
  <title>AutoTech | Perfil</title>
</head>

<body>

  <div class="navbar">

    <div class="blocoperfil">
      <h1>AutoTech</h1>
      <img src="asset/user.png" alt="">
      <h2>Olá, <strong id="userLogado">undefined</strong>!</h2>

    </div>

    <ul class="guias">
      <li class="titleopcionais"><p>Acessar</p></li>
      <li><a href="dashboard.html"> Dashboard</a></li>

      <li id="adicional" class="titleopcionais"><p>Adicionar</p></li>
      
      <li id="addunidades" class="add"  ><p>+ Unidade</p></li>
      <li id="addhardware" class="add"  ><p>+ Hardware</p></li>
      <li id="addfuncionario" class="add" ><p>+ Funcionario</p></li>

      <li id="sair"><a href="index.html" onclick="Deslogar()"><ion-icon name="exit-outline"></ion-icon></a> </li>

    </ul>

  </div>

  <div class="janelainfo">

    <div class="card">
      <div class="detalheboll">

        <div id="boll2After"></div style>
        <div id="boll1"></div>
        <div id="boll2"></div>
        <div id="boll1After"></div>

      </div>

      <div class="cardfilho">

        <div class="areadasinfos">

          <div class="infos">

            <h3 id="nomeCliente">undefined</h3>

            <div class="listadecampos">

              <div class="campo">
                <div class="noeditsinfo" id="noeditsinfo1">
                  <P class="title">Nome:</P>
                  <p id="nomeUsuario">undefined</p>
                </div>

              </div>

              <div class="campo">
                <div class="noeditsinfo" id="noeditsinfo3">
                  <P class="title">CNPJ:</P>
                  <p id="cnpjUsuario">undefined</p>
                </div>
              </div>

              <div class="campo">
                <div class="noeditsinfo" id="noeditsinfo2">
                  <P class="title">Email:</P>
                  <p id="emailUsuario">undefined</p>
                </div>
              </div>

            </div>

            <div class="editarDados">

              <div class="campo" id="campo01">

                <div class="editarinfo" id="editarinfo1">
                  <label class="title" for="inNome">Nome:</label>
                  <input type="text" name="" id="inNome">
                </div>

              </div>

              <div class="campo" id="campo01">

                <div class="editarinfo" id="editarinfo3">
                  <label class="title" for="CNPJ">CNPJ:</label>
                  <input type="text" id="CNPJ" maxlength="18" onkeyup="MascaraCnpj()">
                </div>
              </div>

              <div class="campo" id="campo01">

                <div class="editarinfo" id="editarinfo2">
                  <label class="title" for="inEmail">Email:</label>
                  <input type="text"id="inEmail">
                </div>
              </div>

              <div class="campo">
              
                <div class="editarinfo" id="editarinfo4">
                  <label class="title" for="inSenha">Senha</label>
                  <input type="password" id="inSenha">
                </div>
              </div>

            </div>

          </div>
          <img src="asset/user.png" alt="">

        </div>        

        <div class="campobotoes">
          <button class="botaoEditar" id="btn" onclick="editar()">Editar <ion-icon name="create-outline"></ion-icon> </button>
          <button class="botaoVoltar" id="btn" onclick="voltar()" style="display: none;">Voltar <ion-icon name="create-outline"></ion-icon> </button>

          <div>
            <img src="asset/arrow-forward-outline.svg" alt="">
            <button class="botaoSalvar" id="btnsalvarupdate" onclick="update()">Salvar</button>
          </div>

        </div>

      </div>

      <div id="janelacadastrounidade" class="outroscadastros">
        <ion-icon id="fecharjanelaunidade" class="botaoexit" name="add-outline"></ion-icon>

        <DIV class="containerdentrocadastrarunidade">
          <h1 id="agaumm">Cadastrar unidade</h1>

          <div class="dadoscadastrounidade">
            
            <div class="divisor">
              <input id="unNomeUnidade" class="inpcadastrarunidade" type="text" placeholder="Nome da unidade">   
              <input id="unTelefone" onkeyup="FixoMascara()" class="inpcadastrarunidade" maxlength="12" type="text" placeholder="Telefone">  
            </div>
            <div class="divisor">
              <input id="unCep" onkeyup="CepMascara()" class="inpcadastrarunidade" maxlength="9" placeholder="Cep" type="text">  
              <input id="unLogradouro" class="inpcadastrarunidade" type="text" placeholder="Logradouro">  
            </div>
            <div class="divisor">
              <input id="unBairro" class="inpcadastrarunidade" type="text" placeholder="Bairro">  
              <input id="unNumero" class="inpcadastrarunidade" type="number" placeholder="Numero">  
            </div>
            
            <button id="btncriarunidade" onclick="cadastrarUnidade()">Criar</button>

            <button id="btnupdateunidade" onclick="">Update</button>
          </div>

          <button class="editarunidhard" onclick="abrirteladeescolhaunidade()">Editar <ion-icon name="create-outline"></ion-icon> </button>

        </DIV>

      </div>


      <div id="janelaEditarUnidade" class="outroscadastros">
        <ion-icon id="fecharjanelaunidade" class="botaoexit" name="add-outline"></ion-icon>

        <DIV class="containerdentrocadastrarunidade">
          <h1 id="agaumm">Editar unidade</h1>

          <div class="dadoscadastrounidade">
            <select name="" id="selEditarUnidade">
              <option value="">- Selecione uma Unidade -</option>
            </select>
            
            <div class="divisor">
              <input id="edNomeUnidade" class="inpcadastrarunidade" type="text" placeholder="Nome da unidade">   
              <input id="edTelefone" onkeyup="FixoMascara()" class="inpcadastrarunidade" maxlength="12" type="text" placeholder="Telefone">  
            </div>
            <div class="divisor">
              <input id="edCep" onkeyup="CepMascara()" class="inpcadastrarunidade" maxlength="9" placeholder="Cep" type="text">  
              <input id="edLogradouro" class="inpcadastrarunidade" type="text" placeholder="Logradouro">  
            </div>
            <div class="divisor">
              <input id="edBairro" class="inpcadastrarunidade" type="text" placeholder="Bairro">  
              <input id="edNumero" class="inpcadastrarunidade" type="number" placeholder="Numero">  
            </div>
            
              
              <button id="btncriarunidade" onclick="editarUnidade()">Editar</button>
              
          </div>
          
            <button class="editarunidhard" onclick="abrirteladeescolhaunidade()">Voltar <ion-icon name="create-outline"></ion-icon> </button>
            <button class="excluirUnid" id="" onclick="excluirUnidade()">Excluir unidade</button>
        </DIV>

      </div>

      <div id="janelacadastrohardware" class="outroscadastros">
        <ion-icon id="fecharjanelahardware" class="botaoexit" name="add-outline"></ion-icon>

        <DIV class="containerdentrocadastrarunidade">
          <h1 id="agaum">Cadastrar hardware</h1>

          <div class="dadoscadastrounidade">
            <div class="divisor">
              <input id="nserie" class="inpcadastrarunidade" type="text" placeholder="Numero de série">   
              <input type="text" id="sistemaOperacional" class="inpcadastrarunidade" placeholder="Sistema Operacional">
            </div>

            <div class="divisor">
              <input id="cpuModelo" class="inpcadastrarunidade" type="text" placeholder="Modelo CPU">  
              <input id="capacidadeCpu" class="inpcadastrarunidade" type="number" placeholder="Capacidade CPU (GHz)">  
            </div>
            
            <div class="divisor">
              <input id="discoModelo" class="inpcadastrarunidade" type="text" placeholder="Modelo Disco">  
              <input id="capacidadeDisco" class="inpcadastrarunidade" type="number" placeholder="Capacidade Disco (GB)">  
            </div>
            
            <div class="divisor">
              <input id="memoriaModelo" class="inpcadastrarunidade" type="text" placeholder="Modelo Memória RAM">  
              <input id="capacidadeMemoria" class="inpcadastrarunidade" type="number" placeholder="Capacidade Memória RAM (GB)">  
            </div>
            
            <select name="" id="selHardware">
              <option value="">--Selecione a Unidade--</option>
            </select> 

            <button id="btncriarhardware" onclick="hardwareCadastro()">Criar</button>




            <ul id="listadehaerwareparaupdate">

            </ul>

            <button id="btnupdatehardware" onclick="updatehardware()">Update</button>
          </div>



          <button class="editarunidhard" onclick="abrirteladeescolhahardware()">Editar <ion-icon name="create-outline"></ion-icon> </button>


        </DIV>

      </div>

      <div id="janelacadastrofuncionario" class="outroscadastros">
        <ion-icon id="fecharjanelafuncionario" class="botaoexit" name="add-outline"></ion-icon>

        <DIV class="containerdentrocadastrarunidade">
          <h1 id="agaummm">Cadastrar funcionario</h1>

          <div class="dadoscadastrounidade">

            <div class="divisor">
              <input id="funNome" class="inpcadastrarunidade" type="text" placeholder="Nome">   
              <input id="funSobrenome" class="inpcadastrarunidade" type="text" placeholder="Sobrenome">   
            </div>
           
            <div class="divisor">
              <input id="funData" class="inpcadastrarunidade" type="date" placeholder="Data de Nascimento">  
              <input id="funCelular" class="inpcadastrarunidade" onkeyup="CelularMascara()" type="number" placeholder="Celular" maxlength="13">  
            </div>

            <div class="divisor">
              <select name="" id="selCargo">
                <option value="">--Selecione o Cargo--</option>
                <option value="1">Analista NOC</option>
                <option value="2">Gerente</option>
              </select>
              <select name="" id="selUnidade">
                <option value="">--Selecione a Unidade--</option>
              </select> 
            </div>
            

            <button id="btncriarfuncionario" onclick="funcionarioCadastro()">Cadastrar</button>




            <ul id="listadeunidadedefuncionarioparaupdate">

            </ul>

            <button id="btnupdatefuncionario" onclick="updatefuncionario()">Update</button>
          </div>



          <button class="editarunidhard" onclick="telaEditarFunc()">Editar <ion-icon name="create-outline"></ion-icon> </button>


        </DIV>

      </div>

      <div id="janelaeditarfuncionario" class="outroscadastros">
        <ion-icon id="fecharjanelafuncionario" class="botaoexit" name="add-outline"></ion-icon>

        <DIV class="containerdentrocadastrarunidade">
          <h1 id="agaummm">Editar funcionario</h1>

          <div class="dadoscadastrounidade">

            <select name="" id="selEditarFuncionario">
              <option value="">- Selecione um Funcionario -</option>
            </select>

            <div class="divisor">
              <input id="edNomeFuncionario" class="inpcadastrarunidade" type="text" placeholder="Nome">   
              <input id="edSobrenome" class="inpcadastrarunidade" type="text" placeholder="Sobrenome">   
            </div>
           
            <div class="divisor">
              <input id="edDtNascimento" class="inpcadastrarunidade" type="date" placeholder="Data de Nascimento">  
              <input id="edCelular" class="inpcadastrarunidade" onkeyup="CelularMascaraEditarFunc()" type="text" placeholder="Celular" maxlength="13">  
            </div>

            <div class="divisor">
              <select name="" id="edCargo">
                <option value="">--Selecione o Cargo--</option>
                <option value="Analista NOC">Analista NOC</option>
                <option value="Gerente">Gerente</option>
              </select>
              <select name="" id="edUnidade">
                <option value="">--Selecione a Unidade--</option>
              </select> 
            </div>
            

            <button id="btncriarfuncionario" onclick="editarFuncionario()">Editar</button>

          </div>

          <button class="editarunidhard" onclick="voltarTelaFuncionario()">Voltar <ion-icon name="create-outline"></ion-icon> </button>
          <button class="excluirUnid" id="" onclick="excluirFuncionario()">Excluir funcionario</button>

        </DIV>

      </div>

    </div>

  </div>

</body>

</html>

<script>

function pegarInfoBanco(){
    let hardware = document.querySelector('#selHardware')
    let unidade = document.querySelector('#selUnidade')
    let editarUnidade = document.querySelector('#selEditarUnidade')
    let editarFuncionario = document.querySelector('#edUnidade')
    let id = sessionStorage.getItem('ID_USUARIO')

    fetch(`/usuarios/pegarInfoBanco/${id}`).then(function (resposta){
        if(resposta.ok){
            resposta.json().then(function(response){
                var info = JSON.parse((JSON.stringify(response)))

                console.log(info[0].nome_unidade)

                hardware.innerHTML = ''
                hardware.innerHTML += `<option value = "">-Selecionar Unidade-</option>`
                for(let i = 0; i < response.length; i++){
                    hardware.innerHTML += `<option value = ${info[i].id_unidade}>${info[i].nome_unidade}</option>`
                    unidade.innerHTML += `<option value = ${info[i].id_unidade}>${info[i].nome_unidade}</option>`
                    editarUnidade.innerHTML += `<option value = ${info[i].id_unidade}>${info[i].nome_unidade}</option>`
                    editarFuncionario.innerHTML += `<option value = ${info[i].id_unidade}>${info[i].nome_unidade}</option>`
                }

            })
        }
    })
}

function pegarFuncionariosBanco(){
  let funcionarios = document.querySelector('#selEditarFuncionario')
  let id = sessionStorage.getItem('ID_USUARIO')

  fetch(`/usuarios/pegarFuncionariosBanco/${id}`).then(function (resposta){
    if(resposta.ok){
      resposta.json().then(function(response){
        let info = JSON.parse((JSON.stringify(response)))

        for(let i = 0; i < response.length; i++){
          funcionarios.innerHTML += `<option value = ${info[i].id_funcionario}>${info[i].nome_funcionario}</option>`
        }
      })
    }
  })
}

window.onload = function(){
    pegarInfoBanco();
    pegarFuncionariosBanco();
}

</script>

<script src="./js/perfil.js"></script>

<script type="module" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script>
<script nomodule src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"></script>
